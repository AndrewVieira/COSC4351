(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),l=n.n(o),c=(n(75),n(76),n(17)),i=n(18),s=n(20),u=n(19),m=n(7),p=n(27),d=n(24),h=n(40),E=n(29),f=n(31),g=n(30),v=n(6),b=n(36),w=n(45),k=n.n(w),y=function(e){return{type:"AUTH_SUCCESS",token:e}},O=function(e){return{type:"AUTH_FAIL",error:e}},S=function(){return localStorage.removeItem("user"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},j=function(e){return function(t){setTimeout((function(){t(S())}),1e3*e)}},C=function(){return function(e){var t=localStorage.getItem("token");if(void 0===t)e(S());else{var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e(S()):(e(y(t)),e(j((n.getTime()-(new Date).getTime())/1e3)))}}},T=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(f.a)({},t,n))},a.onSubmit=function(e){e.preventDefault(),""===a.state.username?a.setState({errorShow:!0,errorTitle:"Username Error",errorBody:"Please enter your username!"}):""===a.state.password?a.setState({errorShow:!0,errorTitle:"Password Error",errorBody:"Please enter your password!"}):(console.log("I tried to log in"),a.props.onAuth(a.state.username,a.state.password))},a.handleErrorClose=function(){a.setState({errorShow:!1})},a.handleErrorShow=function(){a.setState({errorShow:!0})},a.state={username:"",password:"",errorShow:!1,errorTitle:"Generic Error",errorBody:"This is a generic error!"},a}return Object(i.a)(n,[{key:"render",value:function(){return this.props.token&&this.props.history.push("/portal"),r.a.createElement("div",{className:"login center"},r.a.createElement("div",{className:"container center_div w-50 align-items-center focus"},r.a.createElement("h1",null,"Login Page"),r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"Username"),r.a.createElement(v.a.Control,{name:"username",type:"username",placeholder:"Enter username",value:this.state.username,onChange:this.onChange})),r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{name:"password",type:"password",placeholder:"Enter password",value:this.state.password,onChange:this.onChange})),r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:this.onSubmit},"Login"),r.a.createElement("p",{className:"d-inline-block"},"\u2002or ",r.a.createElement("strong",null,r.a.createElement(g.b,{to:"/signup"},"Sign Up"))))),r.a.createElement(b.a,{show:this.state.errorShow,onHide:this.handleErrorClose,backdrop:"static",keyboard:!1,centered:!0},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,null,this.state.errorTitle)),r.a.createElement(b.a.Body,null,r.a.createElement("p",null,this.state.errorBody)),r.a.createElement(b.a.Footer,null,r.a.createElement(E.a,{variant:"secondary",onClick:this.handleErrorClose},"Close"))))}}]),n}(r.a.Component),L=Object(p.b)((function(e){return{token:e.token,loading:e.loading,error:e.error}}),(function(e){return{onAuth:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"}),k.a.post("http://localhost:8000/rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",a),n(y(t)),n(j(3600))})).catch((function(e){n(O(e))}))}}(t,n))}}}))(T),U=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(f.a)({},t,n))},a.onSubmit=function(e){e.preventDefault(),a.setState({error:""})},a.state={username:"",password:"",error:""},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup center"},r.a.createElement("div",{className:"container center_div w-50 padding-50 focus"},r.a.createElement("h1",null,"Sign Up Page"),r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"First name"),r.a.createElement(v.a.Control,{type:"username",placeholder:"First name"})),r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"Last name"),r.a.createElement(v.a.Control,{type:"username",placeholder:"Last name"})),r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"Username"),r.a.createElement(v.a.Control,{type:"username",placeholder:"Enter username"})),r.a.createElement(v.a.Group,{controlId:"formUsername"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Enter password"})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Register"))))}}]),n}(r.a.Component),I=n(35),A=n.n(I),x=n(49),_=n(41),D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(_.a,{style:{margin:"1rem"},bg:"light",text:"black"},r.a.createElement("div",{class:"shadow"},r.a.createElement("a",{href:this.props.link},r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Title,null,this.props.name),r.a.createElement(_.a.Text,null,this.props.link)))))}}]),n}(r.a.Component),N=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(x.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.isLoggedIn();case 2:a.props.token||a.props.history.push("/");case 3:case"end":return e.stop()}}),e)}))),a.state={links:[["Example Link 1","https://www.google.com/"],["Example Link 2","https://www.uh.edu/"],["Example Link 3","https://stackoverflow.com/"]]},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"portal center"},r.a.createElement("div",{className:"container center_div w-50 focus"},r.a.createElement("h1",null,"Portal Page"),r.a.createElement("div",{class:"adminlinks"},this.state.links.map((function(e,t){return r.a.createElement(D,{key:t,name:e[0],link:e[1]})})))))}}]),n}(r.a.Component),P=Object(p.b)((function(e){return{token:e.token}}),(function(e){return{isLoggedIn:function(){return e(C())},logout:function(){return e(S())}}}))(N),B=function(e){return e.children},H=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onLogout=function(e){},e.Main=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{bg:"primary",variant:"dark"},r.a.createElement(h.a.Brand,{href:"/"},"Admin Portal"),r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Item,null,r.a.createElement(d.a.Link,{href:"/"},"Login")),r.a.createElement(d.a.Item,null,r.a.createElement(d.a.Link,{href:"/signup"},"Sign Up")),r.a.createElement(d.a.Item,null,r.a.createElement(d.a.Link,{href:"/portal"},"Portal"))),r.a.createElement(h.a.Toggle,null),r.a.createElement(E.a,{type:"submit",variant:"light",onClick:e.onLogout},"Log Out")),r.a.createElement(h.a,{bg:"light",variant:"light",sticky:"bottom",fixed:"bottom"},r.a.createElement(d.a,{className:"m-auto"},r.a.createElement("div",{className:"text-center","text-align":"center",width:"100%"},r.a.createElement("p",null,"COSC 4351 Project - By Carroll Vance, Andrew Vieira, and Jerrin Wiley")))),r.a.createElement(B,null,r.a.createElement(m.a,{exact:!0,path:"/",component:L}),r.a.createElement(m.a,{exact:!0,path:"/signup",component:U}),r.a.createElement(m.a,{exact:!0,path:"/portal",component:P})))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(this.Main,this.props))}}]),n}(r.a.Component),G=Object(p.b)((function(e){return{isAuthenticated:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e(C())},isLoggedIn:function(){return e(C())},logout:function(){return e(S())}}}))(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=n(33),M=n(69),R=n(57),J=function(e,t){return Object(R.a)(Object(R.a)({},e),t)},V={token:null,error:null,loading:!1},W=function(e,t){return J(e,{error:null,loading:!0})},X=function(e,t){return J(e,{token:t.token,error:null,loading:!1})},$=function(){var e=Object(x.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,{error:n.error,loading:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(e,t){return J(e,{token:null})},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return W(e);case"AUTH_SUCCESS":return X(e,t);case"AUTH_FAIL":return $(e,t);case"AUTH_LOGOUT":return q(e);default:return e}},K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.c,Q=Object(F.d)(z,K(Object(F.a)(M.a)));l.a.render(r.a.createElement(p.a,{store:Q},r.a.createElement(g.a,null,r.a.createElement(G,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,n){e.exports=n(101)},75:function(e,t,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.b04a6c12.chunk.js.map